# ЁЯзн Agent Wallboard Database Toolkit

## ЁЯУЛ р╕ар╕▓р╕Юр╕гр╕зр╕б
р╣Вр╕Ыр╕гр╣Ар╕Ир╣Зр╕Бр╕Хр╣Мр╕вр╣Ир╕нр╕вр╕Щр╕╡р╣Йр╕гр╕зр╕Ър╕гр╕зр╕бр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╣Бр╕ер╕░р╕кр╕Др╕╡р╕бр╕▓р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ъ Agent Wallboard р╣Вр╕Фр╕вр╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Др╕зр╣Йр╕Чр╕▒р╣Йр╕З SQLite р╣Бр╕ер╕░ MongoDB р╣Ар╕Юр╕╖р╣Ир╕нр╕Кр╣Ир╕зр╕вр╕Чр╕╡р╕бр╕Юр╕▒р╕Тр╕Щр╕▓р╣Бр╕ер╕░р╕Чр╕Фр╕кр╕нр╕Ър╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕кр╕гр╕╕р╕Ыр╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕нр╣Ар╕Ир╕Щр╕Хр╣Мр╣Др╕Фр╣Йр╕гр╕зр╕Фр╣Ар╕гр╣Зр╕з р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕ер╕╖р╕нр╕Бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▓р╕бр╕кр╕ар╕▓р╕Юр╣Бр╕зр╕Фр╕ер╣Йр╕нр╕бр╕Вр╕нр╕Зр╕Хр╕Щр╣Ар╕нр╕З р╕Юр╕гр╣Йр╕нр╕бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕нр╕кр╕│р╕гр╕нр╕Зр╣Бр╕ер╕░р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Фр╣Ар╕гр╕Бр╕Чр╕нр╕гр╕╡
- `sqlite/` тАУ р╣Др╕Яр╕ер╣Мр╕кр╕Др╕╡р╕бр╕▓ (`init.sql`), р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З (`sample_data.sql`), р╣Бр╕ер╕░р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М `setup.sh` р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕гр╣Йр╕▓р╕З `wallboard.db`
- `mongodb/` тАУ р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М `sample_data.js` р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ыр╣Йр╕нр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Ьр╣Ир╕▓р╕Щ Mongoose р╣Бр╕ер╕░ `setup.sh` р╕Чр╕╡р╣Ир╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╕гр╕▒р╕Щ MongoDB р╣Гр╕лр╣Йр╕Юр╕гр╣Йр╕нр╕бр╕Бр╣Ир╕нр╕Щр╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Й
- `backup.sh` тАУ р╕кр╕│р╕гр╕нр╕З `sqlite/wallboard.db` р╣Бр╕ер╕░р╕Чр╕│ `mongodump` р╣Др╕Ыр╕вр╕▒р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `backups/<timestamp>`
- `reset_all.sh` тАУ р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕кр╕нр╕Зр╣Бр╕Ър╕Ъ (р╕бр╕╡р╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╣Ир╕нр╕Щр╕ер╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е)
- `.env` тАУ р╣Ар╕Бр╣Зр╕Ър╕Др╣Ир╕▓р╕Др╕нр╕Щр╕Яр╕┤р╕Бр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕бр╣Ар╕бр╕╖р╣Ир╕нр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г override р╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ (р╣Др╕бр╣Ир╕Ър╕▒р╕Зр╕Др╕▒р╕Ъ)

## ЁЯЧВя╕П р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е SQLite
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡ `sqlite3` р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ р╣Бр╕ер╣Йр╕зр╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Хр╕▒р╣Йр╕Зр╕Хр╣Йр╕Щ:
   ```bash
   cd database/sqlite
   ./setup.sh
   ```
2. р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Ир╕░р╕ер╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `wallboard.db` (р╕Цр╣Йр╕▓р╕бр╕╡), р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕Др╕╡р╕бр╕▓, р╣Гр╕кр╣Ир╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З р╣Бр╕ер╕░р╕кр╕гр╕╕р╕Ыр╕Ир╕│р╕Щр╕зр╕Щр╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Щ
3. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╕Вр╕нр╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Фр╣Йр╕зр╕вр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕З (р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╕зр╕▒р╕Фр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕Зр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Ар╕Лр╕Бр╕Кр╕▒р╕Щр╕кр╕гр╕╕р╕Ыр╕Ьр╕е):
   ```bash
   cd database/sqlite
   sqlite3 wallboard.db <<'SQL'
   SELECT 'teams' AS table_name, COUNT(*) AS total FROM teams
   UNION ALL
   SELECT 'agents', COUNT(*) FROM agents
   UNION ALL
   SELECT 'system_config', COUNT(*) FROM system_config;
   SQL
   ```

## ЁЯНГ р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е MongoDB
1. р╣Ар╕Ыр╕┤р╕Фр╕Ър╕гр╕┤р╕Бр╕▓р╕г MongoDB р╣Бр╕ер╣Йр╕зр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в `mongosh --eval "db.adminCommand('ping')"`
2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ `MONGODB_URI` р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Вр╕ор╕кр╕Хр╣Мр╕нр╕╖р╣Ир╕Щ (р╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Др╕╖р╕н `mongodb://localhost:27017/wallboard`)
3. р╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Хр╕▒р╣Йр╕Зр╕Хр╣Йр╕Щр╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╣Йр╕нр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З:
   ```bash
   cd database/mongodb
   ./setup.sh
   # р╕лр╕гр╕╖р╕нр╕лр╕▓р╕Бр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З dependency р╣Др╕зр╣Йр╣Бр╕ер╣Йр╕з р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Бр╣Ар╕Юр╕╡р╕вр╕З
   node sample_data.js
   ```
4. р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Ир╕░р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З `mongoose` (р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡), р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕нр╕ер╣Ар╕ер╕Бр╕Кр╕▒р╕Щр╣Ар╕Фр╕┤р╕б, р╣Гр╕кр╣Ир╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З р╣Бр╕ер╕░р╕кр╕гр╕╕р╕Ыр╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Гр╕Щр╣Бр╕Хр╣Ир╕ер╕░р╕Др╕нр╕ер╣Ар╕ер╕Бр╕Кр╕▒р╕Щ

## ЁЯзк р╕кр╕гр╕╕р╕Ыр╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕ер╕нр╕З
| # | р╕Бр╕▓р╕гр╕Чр╕Фр╕ер╕нр╕З | р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф | р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М |
|---|-----------|-------------|---------|
| 1 | р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е SQLite | р╕гр╕▒р╕Щ `sqlite3 wallboard.db` р╣Ар╕Юр╕╖р╣Ир╕нр╕Щр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щ `teams`, `agents`, `system_config` | р╣Др╕Фр╣Йр╕Др╣Ир╕▓ `teams=3`, `agents=13`, `system_config=8` |
| 2 | р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М MongoDB | р╕Чр╕Ър╕Чр╕зр╕Щ `mongodb/sample_data.js` р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╕╕р╕Ыр╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Чр╕╡р╣Ир╕Ир╕░р╕Цр╕╣р╕Б insert | р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╣Ар╕Хр╕гр╕╡р╕вр╕б `messages=6`, `agent_status=9`, `connection_logs=8` р╕Юр╕гр╣Йр╕нр╕бр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Гр╕Щ console |

р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕: р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Ар╕Ыр╕┤р╕Ф MongoDB р╕Ир╕╢р╕Зр╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕гр╕▒р╕Щр╕Чр╕Фр╕ер╕нр╕Зр╕Ир╕гр╕┤р╕Зр╣Гр╕Щр╕лр╕▒р╕зр╕Вр╣Йр╕нр╕Чр╕╡р╣И 2 р╣Вр╕Ыр╕гр╕Фр╕гр╕▒р╕Щ `mongodb/setup.sh` р╕ар╕▓р╕вр╕лр╕ер╕▒р╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕▒р╕Ър╕Др╣Ир╕▓р╕Ир╕гр╕┤р╕Зр╣Бр╕ер╕░р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в `mongosh wallboard --eval 'db.messages.countDocuments()'`

## ЁЯТ╛ р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╣Ар╕кр╕гр╕┤р╕бр╕Чр╕╡р╣Ир╕Др╕зр╕гр╕гр╕╣р╣Й
- `./backup.sh` тАУ р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `backups/` р╕Хр╕▓р╕бр╣Ар╕зр╕ер╕▓р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ р╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕кр╕│р╣Ар╕Щр╕▓ SQLite р╣Бр╕ер╕░р╕Ьр╕е `mongodump`
- `./reset_all.sh` тАУ р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Гр╕лр╕бр╣Ир╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕Хр╣Йр╕нр╕Зр╕Хр╕нр╕Ъ `yes` р╕Бр╣Ир╕нр╕Щр╕Чр╕│р╕Зр╕▓р╕Щ) р╣Бр╕ер╕░р╣Гр╕лр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕ар╕▓р╕вр╕лр╕ер╕▒р╕З

## тЬЕ р╣Ар╕Кр╣Зр╕Бр╕ер╕┤р╕кр╕Хр╣Мр╕лр╕ер╕▒р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- тЬи р╣Гр╕Кр╣Й SQLite р╣Ар╕бр╕╖р╣Ир╕нр╕нр╕вр╕▓р╕Бр╣Др╕Фр╣Йр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕гр╣Зр╕з р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╣Ар╕Фр╕╡р╕вр╕зр╕Ир╕Ъ
- ЁЯНГ р╣Гр╕Кр╣Й MongoDB р╣Ар╕бр╕╖р╣Ир╕нр╕гр╕░р╕Ър╕Ър╕лр╕ер╕▒р╕Бр╕Вр╕нр╕Зр╕Чр╕╡р╕бр╕Чр╕│р╕Зр╕▓р╕Щр╕Ър╕Щ NoSQL р╕лр╕гр╕╖р╕нр╕бр╕╡р╕Ър╕гр╕┤р╕Бр╕▓р╕г MongoDB р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з
- ЁЯТб р╕лр╕ер╕▒р╕Зр╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М р╣Гр╕лр╣Йр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Ир╕▓р╕Б console р╣Др╕зр╣Йр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Ър╕кр╕гр╕╕р╕Ыр╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ

р╕Вр╕нр╣Гр╕лр╣Йр╕кр╕Щр╕╕р╕Бр╕Бр╕▒р╕Ър╕Бр╕▓р╕гр╕Чр╕Фр╕ер╕нр╕Зр╣Бр╕ер╕░р╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕Зр╕гр╕░р╕Ър╕Ъ Agent Wallboard! ЁЯШД
